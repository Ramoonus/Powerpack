/*
 microformat-shiv - v1.3.1
 Built: 2015-10-08 10:10 - http://microformat-shiv.com
 Copyright (c) 2015 Glenn Jones
 Licensed MIT
 */



var Microformats;!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.Microformats=b()}(this,function(){function a(a,b){b&&b.maps&&(Array.isArray(b.maps)?a.add(b.maps):a.add([b.maps]))}var b={};b.version="1.3.1",b.livingStandard="2015-09-25T12:26:04Z",b.Parser=function(){this.rootPrefix="h-",this.propertyPrefixes=["p-","dt-","u-","e-"],this.excludeTags=["br","hr"]},b.maps=b.maps?b.maps:{},b.rels=b.rels?b.rels:{},b.Parser.prototype={init:function(){this.rootNode=null,this.document=null,this.options={baseUrl:"",filters:[],textFormat:"whitespacetrimmed",dateFormat:"auto",overlappingVersions:!1,impliedPropertiesByVersion:!0,parseLatLonGeo:!1},this.rootID=0,this.errors=[],this.noContentErr="No options.node or options.html was provided and no document object could be found."},get:function(a){var c,d=this.formatEmpty(),e=[];if(this.init(),a=a?a:{},this.mergeOptions(a),this.getDOMContext(a),this.rootNode&&this.document){if(this.hasMicroformats(this.rootNode,a)){if(this.prepareDOM(a),this.options.filters.length>0){var f=this.findFilterNodes(this.rootNode,this.options.filters);e=this.walkRoot(f)}else e=this.walkRoot(this.rootNode);d.items=e,b.domUtils.canCloneDocument(this.document)===!1&&this.clearUpDom(this.rootNode)}this.findRels&&(c=this.findRels(this.rootNode),d.rels=c.rels,d["rel-urls"]=c["rel-urls"])}else this.errors.push(this.noContentErr);return this.errors.length>0?this.formatError():d},getParent:function(a,b){return this.init(),b=b?b:{},a?this.getParentTreeWalk(a,b):(this.errors.push(this.noContentErr),this.formatError())},count:function(a){var c,d,e,f,g={};if(this.init(),a=a?a:{},this.getDOMContext(a),this.rootNode&&this.document){for(c=this.findRootNodes(this.rootNode,!0),f=c.length;f--;)for(d=b.domUtils.getAttributeList(c[f],"class"),e=d.length;e--;){b.utils.startWith(d[e],"h-")&&this.appendCount(d[e],1,g);for(var h in b.maps)b.maps[h].root===d[e]&&-1===d.indexOf(h)&&this.appendCount(h,1,g)}var i=this.countRels(this.rootNode);return i>0&&(g.rels=i),g}return{errors:[this.noContentErr]}},isMicroformat:function(a,c){var d,e;if(!a)return!1;if(a=b.domUtils.getTopMostNode(a),d=this.getUfClassNames(a),c&&c.filters&&b.utils.isArray(c.filters)){for(e=c.filters.length;e--;)if(d.root.indexOf(c.filters[e])>-1)return!0;return!1}return d.root.length>0},hasMicroformats:function(a,c){var d,e;if(!a)return!1;if(a=b.domUtils.getTopMostNode(a),d=this.findRootNodes(a,!0),c&&c.filters&&b.utils.isArray(c.filters)){for(e=d.length;e--;)if(this.isMicroformat(d[e],c))return!0;return!1}return d.length>0},add:function(a){a.forEach(function(a){a&&a.root&&a.name&&a.properties&&(b.maps[a.name]=JSON.parse(JSON.stringify(a)))})},getParentTreeWalk:function(a,b,c){return b=b?b:{},void 0===c?a.parentNode&&"HTML"!==a.nodeName?this.getParentTreeWalk(a.parentNode,b,!0):this.formatEmpty():null!==a&&void 0!==a&&a.parentNode?this.isMicroformat(a,b)?(b.node=a,this.get(b)):this.getParentTreeWalk(a.parentNode,b,!0):this.formatEmpty()},getDOMContext:function(a){var c=b.domUtils.getDOMContext(a);this.rootNode=c.rootNode,this.document=c.document},prepareDOM:function(a){var c,d;!a.baseUrl&&this.document&&this.document.location&&(this.options.baseUrl=this.document.location.href),c=b.domUtils.querySelector(this.document,"base"),c&&(d=b.domUtils.getAttribute(c,"href"),d&&(this.options.baseUrl=d));var e,f,g;return e=b.domUtils.getNodePath(this.rootNode),f=b.domUtils.cloneDocument(this.document),g=b.domUtils.getNodeByPath(f,e),f&&g&&(this.document=f,this.rootNode=g),this.addIncludes&&this.addIncludes(this.document),this.rootNode&&this.document},formatError:function(){var a=this.formatEmpty();return a.errors=this.errors,a},formatEmpty:function(){return{items:[],rels:{},"rel-urls":{}}},findFilterNodes:function(a,c){var d=b.domUtils.createNode("div"),e=this.findRootNodes(a,!0),f=0,g=0,h=0;if(e)for(f=e.length;f>g;){for(h=c.length;h--;)if(this.getMapping(c[h])){var i=this.getMapping(c[h]).root;c.push(i)}for(h=c.length;h--;)if(b.domUtils.hasAttributeValue(e[g],"class",c[h])){var j=b.domUtils.clone(e[g]);b.domUtils.appendChild(d,j);break}g++}return d},appendCount:function(a,b,c){c[a]?c[a]=c[a]+b:c[a]=b},shouldInclude:function(a,c){var d;if(b.utils.isArray(c)&&c.length>0){for(d=c.length;d--;)if(a.type[0]===c[d])return!0;return!1}return!0},findRootNodes:function(a,c){var d,e,f,g,h,i=null,j=[],k=[];for(h in b.maps)b.maps.hasOwnProperty(h)&&k.push(b.maps[h].root);for(c=c?c:!1,i=c&&a.parentNode?b.domUtils.getNodesByAttribute(a.parentNode,"class"):b.domUtils.getNodesByAttribute(a,"class"),e=0,f=i.length;f>e;){for(d=b.domUtils.getAttributeList(i[e],"class"),g=d.length;g--;){if(k.indexOf(d[g])>-1){j.push(i[e]);break}if(b.utils.startWith(d[g],"h-")){j.push(i[e]);break}}e++}return j},walkRoot:function(a){var c,d,e=this,f=[],g=[],h=[];if(d=this.getUfClassNames(a),d&&d.root.length>0)g=this.walkTree(a),g.length>0&&(h=h.concat(g));else if(f=b.domUtils.getChildren(a),f&&f.length>0&&this.findRootNodes(a,!0).length>-1)for(var i=0;i<f.length;i++)c=f[i],g=e.walkRoot(c),g.length>0&&(h=h.concat(g));return h},walkTree:function(a){var b,c,d,e=[];return b=this.getUfClassNames(a),b&&b.root.length&&b.root.length>0&&(this.rootID++,d=this.rootID,c=this.createUfObject(b.root,b.typeVersion),this.walkChildren(a,c,b.root,d,b),this.impliedRules&&this.impliedRules(a,c,b),e.push(this.cleanUfObject(c))),e},walkChildren:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q=this,r=[];for(r=b.domUtils.getChildren(a),n=0,o=r.length;o>n;){p=r[n];var s=q.getUfClassNames(p,d);if(s.root.length>0&&s.properties.length>0&&!p.addedAsRoot){for(g=q.createUfObject(s.root,s.typeVersion,b.text.parse(this.document,p,q.options.textFormat)),j=q.removePropPrefix(s.properties[0][0]),f&&1===f.root.length&&1===f.properties.length&&q.impliedValueRule&&(c=q.impliedValueRule(c,f.properties[0][0],s.properties[0][0],i)),c.properties[j]?c.properties[j].push(g):c.properties[j]=[g],q.rootID++,p.addedAsRoot=!0,m=0,l=g.type.length,h=q.rootID;l>m;)q.walkChildren(p,g,g.type,h,s),m++;this.impliedRules&&q.impliedRules(p,g,s),this.cleanUfObject(g)}if(0===s.root.length&&s.properties.length>0){for(m=0,l=s.properties.length;l>m;)i=q.getValue(p,s.properties[m][0],c),j=q.removePropPrefix(s.properties[m][0]),k=s.properties[m][1],f&&1===f.root.length&&1===f.properties.length&&q.impliedValueRule&&(c=q.impliedValueRule(c,f.properties[0][0],s.properties[m][0],i)),q.hasRootID(p,e,j)||q.isAllowedPropertyVersion(c.typeVersion,k)&&(c.properties[j]?c.properties[j].push(i):c.properties[j]=[i],q.appendRootID(p,e,j)),m++;q.walkChildren(p,c,d,e,s)}if(0===s.root.length&&0===s.properties.length&&q.walkChildren(p,c,d,e,s),s.root.length>0&&0===s.properties.length){for(g=q.createUfObject(s.root,s.typeVersion,b.text.parse(this.document,p,q.options.textFormat)),c.children||(c.children=[]),q.hasRootID(p,e,"child-root")||(c.children.push(g),q.appendRootID(p,e,"child-root"),q.rootID++),m=0,l=g.type.length,h=q.rootID;l>m;)q.walkChildren(p,g,g.type,h,s),m++;this.impliedRules&&q.impliedRules(p,g,s),q.cleanUfObject(g)}n++}},getValue:function(a,c,d){var e="";return b.utils.startWith(c,"p-")&&(e=this.getPValue(a,!0)),b.utils.startWith(c,"e-")&&(e=this.getEValue(a)),b.utils.startWith(c,"u-")&&(e=this.getUValue(a,!0)),b.utils.startWith(c,"dt-")&&(e=this.getDTValue(a,c,d,!0)),e},getPValue:function(a,c){var d="";return c&&(d=this.getValueClass(a,"p")),!d&&c&&(d=this.getValueTitle(a)),d||(d=b.domUtils.getAttrValFromTagList(a,["abbr"],"title")),d||(d=b.domUtils.getAttrValFromTagList(a,["data","input"],"value")),("br"===a.name||"hr"===a.name)&&(d=""),d||(d=b.domUtils.getAttrValFromTagList(a,["img","area"],"alt")),d||(d=b.text.parse(this.document,a,this.options.textFormat)),d?d:""},getEValue:function(a){var c={value:"",html:""};return this.expandURLs(a,"src",this.options.baseUrl),this.expandURLs(a,"href",this.options.baseUrl),c.value=b.text.parse(this.document,a,this.options.textFormat),c.html=b.html.parse(a),c},getUValue:function(a,c){var d="";return c&&(d=this.getValueClass(a,"u")),!d&&c&&(d=this.getValueTitle(a)),d||(d=b.domUtils.getAttrValFromTagList(a,["a","area"],"href")),d||(d=b.domUtils.getAttrValFromTagList(a,["img","audio","video","source"],"src")),d||(d=b.domUtils.getAttrValFromTagList(a,["object"],"data")),d&&""!==d&&-1===d.indexOf("://")&&(d=b.url.resolve(d,this.options.baseUrl)),d||(d=b.domUtils.getAttrValFromTagList(a,["abbr"],"title")),d||(d=b.domUtils.getAttrValFromTagList(a,["data","input"],"value")),d||(d=b.text.parse(this.document,a,this.options.textFormat)),d?d:""},getDTValue:function(a,c,d,e){var f="";return e&&(f=this.getValueClass(a,"dt")),!f&&e&&(f=this.getValueTitle(a)),f||(f=b.domUtils.getAttrValFromTagList(a,["time","ins","del"],"datetime")),f||(f=b.domUtils.getAttrValFromTagList(a,["abbr"],"title")),f||(f=b.domUtils.getAttrValFromTagList(a,["data","input"],"value")),f||(f=b.text.parse(this.document,a,this.options.textFormat)),f?b.dates.isDuration(f)?f:b.dates.isTime(f)?(d&&d.times.push([c,b.dates.parseAmPmTime(f,this.options.dateFormat)]),b.dates.parseAmPmTime(f,this.options.dateFormat)):(d&&d.dates.push([c,new b.ISODate(f).toString(this.options.dateFormat)]),new b.ISODate(f).toString(this.options.dateFormat)):""},appendRootID:function(a,c,d){if(this.hasRootID(a,c,d)===!1){var e=[];b.domUtils.hasAttribute(a,"rootids")&&(e=b.domUtils.getAttributeList(a,"rootids")),e.push("id"+c+"-"+d),b.domUtils.setAttribute(a,"rootids",e.join(" "))}},hasRootID:function(a,c,d){var e=[];return b.domUtils.hasAttribute(a,"rootids")?(e=b.domUtils.getAttributeList(a,"rootids"),e.indexOf("id"+c+"-"+d)>-1):!1},getValueClass:function(a,c){var d,e,f,g=this,h=[],i=[];for(h=b.domUtils.getChildren(a),e=0,f=h.length;f>e;){d=h[e];var j=null;if(b.domUtils.hasAttributeValue(d,"class","value")){switch(c){case"p":j=g.getPValue(d,!1);break;case"u":j=g.getUValue(d,!1);break;case"dt":j=g.getDTValue(d,"",null,!1)}j&&i.push(b.utils.trim(j))}e++}return i.length>0?"p"===c?b.text.parseText(this.document,i.join(" "),this.options.textFormat):"u"===c?i.join(""):"dt"===c?b.dates.concatFragments(i,this.options.dateFormat).toString(this.options.dateFormat):void 0:null},getValueTitle:function(a){var c,d,e,f=[];for(c=b.domUtils.getNodesByAttributeValue(a,"class","value-title"),e=0,d=c.length;d>e;)b.domUtils.hasAttribute(c[e],"title")&&f.push(b.domUtils.getAttribute(c[e],"title")),e++;return f.join("")},hasHClass:function(a){var b=this.getUfClassNames(a);return b.root&&b.root.length>0?!0:!1},getUfClassNames:function(a,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=this,s={root:[],properties:[]};if(b.domUtils.hasTagName(a,this.excludeTags)===!1&&(d=b.domUtils.getAttribute(a,"class")))for(f=d.split(" "),i=0,h=f.length;h>i;){for(g=b.utils.trim(f[i]),b.utils.startWith(g,r.rootPrefix)&&(-1===s.root.indexOf(g)&&s.root.push(g),s.typeVersion="v2"),j=r.propertyPrefixes.length;j--;)b.utils.startWith(g,r.propertyPrefixes[j])&&s.properties.push([g,"v2"]);for(e in b.maps)b.maps.hasOwnProperty(e)&&b.maps[e].root===g&&-1===s.root.indexOf(e)&&(b.maps[e].subTree?s.properties.push(["p-"+b.maps[e].root,"v1"]):(s.root.push(e),s.typeVersion||(s.typeVersion="v1")));if(c)for(var t=0;t<c.length;t++)if(q=c[t],l=r.getMapping(q))for(e in l.properties)if(l.properties.hasOwnProperty(e)&&(m=l.properties[e],n=m.map?m.map:"p-"+e,e===g))if(m.uf){for(k=0;h>k;)o=r.getV2RootName(f[k]),m.uf.indexOf(o)>-1&&-1===s.root.indexOf(o)&&(s.root.push(o),s.typeVersion="v1"),k++;-1===s.properties.indexOf(n)&&s.properties.push([n,"v1"])}else-1===s.properties.indexOf(n)&&s.properties.push([n,"v1"]);i++}if(c&&this.findRelImpied)for(var u=0;u<c.length;u++)q=c[u],p=this.findRelImpied(a,q),p&&-1===s.properties.indexOf(p)&&s.properties.push([p,"v1"]);return s},getMapping:function(a){var c;for(c in b.maps)if(b.maps[c].root===a||c===a)return b.maps[c];return null},getV2RootName:function(a){var c;for(c in b.maps)if(b.maps[c].root===a)return c;return null},isAllowedPropertyVersion:function(a,b){return this.options.overlappingVersions===!0?!0:a===b},createUfObject:function(a,c,d){var e={};return d&&b.utils.isOnlyWhiteSpace(d)===!1&&(e.value=d),b.utils.isArray(a)?e.type=a:e.type=[a],e.properties={},e.typeVersion=c,e.times=[],e.dates=[],e.altValue=null,e},cleanUfObject:function(a){return delete a.times,delete a.dates,delete a.typeVersion,delete a.altValue,a},removePropPrefix:function(a){var c;for(c=this.propertyPrefixes.length;c--;){var d=this.propertyPrefixes[c];b.utils.startWith(a,d)&&(a=a.substr(d.length))}return a},expandURLs:function(a,c,d){var e,f,g;for(f=b.domUtils.getNodesByAttribute(a,c),e=f.length;e--;)try{g=b.domUtils.getAttribute(f[e],c),g&&""!==g&&""!==d&&-1===g.indexOf("://")&&(g=b.url.resolve(g,d),b.domUtils.setAttribute(f[e],c,g))}catch(h){}},mergeOptions:function(a){var b;for(b in a)a.hasOwnProperty(b)&&(this.options[b]=a[b])},removeRootIds:function(a){var c,d;for(c=b.domUtils.getNodesByAttribute(a,"rootids"),d=c.length;d--;)b.domUtils.removeAttribute(c[d],"rootids")},clearUpDom:function(a){this.removeIncludes&&this.removeIncludes(a),this.removeRootIds(a)}},b.Parser.prototype.constructor=b.Parser,b.Parser&&(b.Parser.prototype.impliedRules=function(a,b,c){var d=b.typeVersion?b.typeVersion:"v2";return this.options.impliedPropertiesByVersion===!1&&(d="v2"),a&&b&&b.properties&&(b=this.impliedBackwardComp(a,b,c),"v2"===d&&(b=this.impliedhFeedTitle(b),b=this.impliedName(a,b),b=this.impliedPhoto(a,b),b=this.impliedUrl(a,b)),b=this.impliedValue(a,b,c),b=this.impliedDate(b),this.options.parseLatLonGeo===!0&&(b=this.impliedGeo(b))),b},b.Parser.prototype.impliedName=function(a,c){var d,e;if(!c.properties.name){e=this.getImpliedProperty(a,["img","area","abbr"],this.getNameAttr);var f=this.options.textFormat;d=e?[b.text.parseText(this.document,e,f)]:[b.text.parse(this.document,a,f)],d&&""!==d[0]&&(c.properties.name=d)}return c},b.Parser.prototype.impliedPhoto=function(a,c){var d;return c.properties.photo||(d=this.getImpliedProperty(a,["img","object"],this.getPhotoAttr),d&&(d&&""!==d&&""!==this.options.baseUrl&&-1===d.indexOf("://")&&(d=b.url.resolve(d,this.options.baseUrl)),c.properties.photo=[b.utils.trim(d)])),c},b.Parser.prototype.impliedUrl=function(a,c){var d;return c.properties.url||(d=this.getImpliedProperty(a,["a","area"],this.getURLAttr),d&&(d&&""!==d&&""!==this.options.baseUrl&&-1===d.indexOf("://")&&(d=b.url.resolve(d,this.options.baseUrl)),c.properties.url=[b.utils.trim(d)])),c},b.Parser.prototype.impliedDate=function(a){var c;return a.times.length>0&&a.dates.length>0&&(c=b.dates.dateTimeUnion(a.dates[0][1],a.times[0][1],this.options.dateFormat),a.properties[this.removePropPrefix(a.times[0][0])][0]=c.toString(this.options.dateFormat)),delete a.times,delete a.dates,a},b.Parser.prototype.getImpliedProperty=function(a,c,d){var e,f,g=d(a);return g||(e=b.domUtils.getSingleDescendantOfType(a,c),e&&this.hasHClass(e)===!1&&(g=d(e)),a.children.length>0&&(f=b.domUtils.getSingleDescendant(a),f&&this.hasHClass(f)===!1&&(e=b.domUtils.getSingleDescendantOfType(f,c),e&&this.hasHClass(e)===!1&&(g=d(e))))),g},b.Parser.prototype.getNameAttr=function(a){var c=b.domUtils.getAttrValFromTagList(a,["img","area"],"alt");return c||(c=b.domUtils.getAttrValFromTagList(a,["abbr"],"title")),c},b.Parser.prototype.getPhotoAttr=function(a){var c=b.domUtils.getAttrValFromTagList(a,["img"],"src");return c||b.domUtils.hasAttributeValue(a,"class","include")!==!1||(c=b.domUtils.getAttrValFromTagList(a,["object"],"data")),c},b.Parser.prototype.getURLAttr=function(a){var c=null;return b.domUtils.hasAttributeValue(a,"class","include")===!1&&(c=b.domUtils.getAttrValFromTagList(a,["a"],"href"),c||(c=b.domUtils.getAttrValFromTagList(a,["area"],"href"))),c},b.Parser.prototype.impliedValue=function(a,b,c){return b.properties.name&&b.value&&c.root.length>0&&1===c.properties.length&&(b=this.getAltValue(b,c.properties[0][0],"p-name",b.properties.name[0])),b.properties.url&&c&&1===c.root.length&&1===c.properties.length&&(b=this.getAltValue(b,c.properties[0][0],"u-url",b.properties.url[0])),null!==b.altValue&&(b.value=b.altValue.value),delete b.altValue,b},b.Parser.prototype.getAltValue=function(a,c,d,e){return a.value&&!a.altValue&&(b.utils.startWith(c,"p-")&&"p-name"===d&&(a.altValue={name:d,value:e}),b.utils.startWith(c,"e-")&&b.utils.startWith(d,"e-")&&(a.altValue={name:d,value:e}),b.utils.startWith(c,"u-")&&"u-url"===d&&(a.altValue={name:d,value:e})),a},b.Parser.prototype.impliedhFeedTitle=function(a){if(a.type&&a.type.indexOf("h-feed")>-1&&(void 0===a.properties.name||""===a.properties.name[0])){var c=b.domUtils.querySelector(this.document,"title");c&&(a.properties.name=[b.domUtils.textContent(c)])}return a},b.Parser.prototype.impliedGeo=function(a){var c,d,e,f,g=!0;return a.type&&a.type.indexOf("h-geo")>-1&&(void 0===a.properties.latitude||void 0===a.properties.longitude)&&(c=a.properties.name?a.properties.name[0]:null,c=!c&&a.properties.value?a.properties.value:c,c&&(c=c.replace(";",","),c.indexOf(",")>-1&&(d=c.split(","),d.length>1&&(f=parseFloat(d[0]),(b.utils.isNumber(f)&&f>90||-90>f)&&(g=!1),e=parseFloat(d[1]),(b.utils.isNumber(e)&&e>180||-180>e)&&(g=!1),g&&(a.properties.latitude=[f],a.properties.longitude=[e]))))),a},b.Parser.prototype.impliedBackwardComp=function(a,c,d){return 1===d.root.length&&1===d.properties.length&&d.root[0].replace("h-","")===this.removePropPrefix(d.properties[0][0])&&b.utils.hasProperties(c.properties)===!1&&(c=this.impliedName(a,c)),c}),b.Parser&&(b.Parser.prototype.addIncludes=function(a){this.addAttributeIncludes(a,"itemref"),this.addAttributeIncludes(a,"headers"),this.addClassIncludes(a)},b.Parser.prototype.addAttributeIncludes=function(a,c){var d,e,f,g,h,i;for(d=b.domUtils.getNodesByAttribute(a,c),g=0,f=d.length;f>g;){if(e=b.domUtils.getAttributeList(d[g],c))for(h=0,i=e.length;i>h;)this.apppendInclude(d[g],e[h]),h++;g++}},b.Parser.prototype.addClassIncludes=function(a){var c,d,e,f=0;for(d=b.domUtils.getNodesByAttributeValue(a,"class","include"),e=d.length;e>f;)c=b.domUtils.getAttrValFromTagList(d[f],["a"],"href"),c||(c=b.domUtils.getAttrValFromTagList(d[f],["object"],"data")),this.apppendInclude(d[f],c),f++},b.Parser.prototype.apppendInclude=function(a,c){var d,e;c=b.utils.trim(c.replace("#","")),d=b.domUtils.getElementById(this.document,c),d&&(e=b.domUtils.clone(d),this.markIncludeChildren(e),b.domUtils.appendChild(a,e))},b.Parser.prototype.markIncludeChildren=function(a){var c,d,e;for(c=this.findRootNodes(a),d=0,e=c.length,b.domUtils.setAttribute(a,"data-include","true"),b.domUtils.setAttribute(a,"style","display:none");e>d;)b.domUtils.setAttribute(c[d],"data-include","true"),d++},b.Parser.prototype.removeIncludes=function(a){var c,d;for(c=b.domUtils.getNodesByAttribute(a,"data-include"),d=c.length;d--;)b.domUtils.removeChild(a,c[d])}),b.Parser&&(b.Parser.prototype.findRels=function(a){var c,d,e,f,g,h,i,j,k,l={items:[],rels:{},"rel-urls":{}};for(k=b.domUtils.getNodesByAttribute(a,"rel"),c=0,d=k.length;d>c;){if(g=b.domUtils.getAttribute(k[c],"rel")){for(h=g.split(" "),f=0,e=h.length;e>f;){if(i=b.utils.trim(h[f]),j=b.domUtils.getAttrValFromTagList(k[c],["a","area"],"href"),j||(j=b.domUtils.getAttrValFromTagList(k[c],["link"],"href")),l.rels[i]||(l.rels[i]=[]),"string"==typeof this.options.baseUrl&&"string"==typeof j){var m=b.url.resolve(j,this.options.baseUrl);-1===l.rels[i].indexOf(m)&&l.rels[i].push(m)}f++}var n=null;b.domUtils.hasAttribute(k[c],"href")&&(n=b.domUtils.getAttribute(k[c],"href"),n&&(n=b.url.resolve(n,this.options.baseUrl)));var o=this.getRelProperties(k[c]);o.rels=h,n&&void 0===l["rel-urls"][n]&&(l["rel-urls"][n]=o)}c++}return l},b.Parser.prototype.getRelProperties=function(a){var c={};return b.domUtils.hasAttribute(a,"media")&&(c.media=b.domUtils.getAttribute(a,"media")),b.domUtils.hasAttribute(a,"type")&&(c.type=b.domUtils.getAttribute(a,"type")),b.domUtils.hasAttribute(a,"hreflang")&&(c.hreflang=b.domUtils.getAttribute(a,"hreflang")),b.domUtils.hasAttribute(a,"title")&&(c.title=b.domUtils.getAttribute(a,"title")),""!==b.utils.trim(this.getPValue(a,!1))&&(c.text=this.getPValue(a,!1)),c},b.Parser.prototype.findRelImpied=function(a,c){var d,e,f;if(e=this.getMapping(c))for(var g in e.properties)if(e.properties.hasOwnProperty(g)){var h=e.properties[g],i=h.map?h.map:"p-"+g,j=0;if(h.relAlt&&b.domUtils.hasAttribute(a,"rel")){for(f=h.relAlt.length;f--;)b.domUtils.hasAttributeValue(a,"rel",h.relAlt[f])&&j++;j===h.relAlt.length&&(d=i)}}return d},b.Parser.prototype.hasRel=function(a){return this.countRels(a)>0},b.Parser.prototype.countRels=function(a){return a?b.domUtils.getNodesByAttribute(a,"rel").length:0}),b.utils={isString:function(a){return"string"==typeof a},isNumber:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},isArray:function(a){return a&&!a.propertyIsEnumerable("length")&&"object"==typeof a&&"number"==typeof a.length},isFunction:function(a){return!!(a&&a.constructor&&a.call&&a.apply)},startWith:function(a,b){return 0===a.indexOf(b)},trim:function(a){return a&&this.isString(a)?a.trim()?a.trim():a.replace(/^\s+|\s+$/g,""):""},replaceCharAt:function(a,b,c){return a&&a.length>b?a.substr(0,b)+c+a.substr(b+c.length):a},trimWhitespace:function(a){if(a&&a.length){for(var b=a.length,c=0;b--&&this.isOnlyWhiteSpace(a[b]);)a=this.replaceCharAt(a,b," ");for(b=a.length;b>c&&this.isOnlyWhiteSpace(a[c]);)a=this.replaceCharAt(a,b," "),c++}return this.trim(a)},isOnlyWhiteSpace:function(a){return!/[^\t\n\r ]/.test(a)},collapseWhiteSpace:function(a){return a.replace(/[\t\n\r ]+/g," ")},hasProperties:function(a){var b;for(b in a)if(a.hasOwnProperty(b))return!0;return!1},sortObjects:function(a,b){return b=b?-1:1,function(c,d){return c=c[a],d=d[a],d>c?-1*b:c>d?1*b:0}}},b.domUtils={document:null,rootNode:null,getDOMContext:function(a){if(a.node&&(this.rootNode=a.node),a.html){var c=new DOMParser;this.rootNode=c.parseFromString(a.html,"text/html")}return null!==this.rootNode&&(9===this.rootNode.nodeType?(this.document=this.rootNode,this.rootNode=b.domUtils.querySelector(this.rootNode,"html")):this.document=b.domUtils.ownerDocument(this.rootNode)),!this.rootNode&&document&&(this.rootNode=b.domUtils.querySelector(document,"html"),this.document=document),this.rootNode&&this.document?{document:this.document,rootNode:this.rootNode}:{document:null,rootNode:null}},getTopMostNode:function(a){return a},ownerDocument:function(a){return a.ownerDocument},textContent:function(a){return a.textContent?a.textContent:a.innerText?a.innerText:""},innerHTML:function(a){return a.innerHTML},hasAttribute:function(a,b){return a.hasAttribute(b)},hasAttributeValue:function(a,b,c){return this.getAttributeList(a,b).indexOf(c)>-1},getAttribute:function(a,b){return a.getAttribute(b)},setAttribute:function(a,b,c){a.setAttribute(b,c)},removeAttribute:function(a,b){a.removeAttribute(b)},getElementById:function(a,b){return a.querySelector("#"+b)},querySelector:function(a,b){return a.querySelector(b)},getAttributeList:function(a,b){var c,d=[];return c=a.getAttribute(b),c&&""!==c&&(c.indexOf(" ")>-1?d=c.split(" "):d.push(c)),d},getNodesByAttribute:function(a,b){var c="["+b+"]";return a.querySelectorAll(c)},getNodesByAttributeValue:function(a,b,c){var d,e=[],f=0,g=[];if(e=this.getNodesByAttribute(a,b))for(d=e.length;d>f;)this.hasAttributeValue(e[f],b,c)&&g.push(e[f]),f++;return g},getAttrValFromTagList:function(a,b,c){for(var d=b.length;d--;)if(a.tagName.toLowerCase()===b[d]){var e=this.getAttribute(a,c);if(e&&""!==e)return e}return null},getSingleDescendant:function(a){return this.getDescendant(a,null,!1)},getSingleDescendantOfType:function(a,b){return this.getDescendant(a,b,!0)},getDescendant:function(a,b,c){for(var d,e=a.children.length,f=0,g=0,h=null;e--;)d=a.children[e],1===d.nodeType&&(b?this.hasTagName(d,b)&&(h=d,g++):(h=d,f++));return c===!0?1===g?h:null:1===f?h:null},hasTagName:function(a,b){for(var c=b.length;c--;)if(a.tagName.toLowerCase()===b[c])return!0;return!1},appendChild:function(a,b){return a.appendChild(b)},removeChild:function(a){return a.parentNode?a.parentNode.removeChild(a):null},clone:function(a){var b=a.cloneNode(!0);return b.removeAttribute("id"),b},getElementText:function(a){return a&&a.data?a.data:""},getOrderedAttributes:function(a){for(var c=a.outerHTML,d=[],e=0;e<a.attributes.length;e++){var f=a.attributes[e];f.indexNum=c.indexOf(f.name),d.push(f)}return d.sort(b.utils.sortObjects("indexNum"))},decodeEntities:function(a,b){return a.createTextNode(b).nodeValue},cloneDocument:function(a){var b,c=null;return this.canCloneDocument(a)&&(c=a.implementation.createHTMLDocument(""),b=c.importNode(a.documentElement,!0),c.replaceChild(b,c.querySelector("html"))),b&&b.nodeType&&1===b.nodeType?c:a},canCloneDocument:function(a){return a&&a.importNode&&a.implementation&&a.implementation.createHTMLDocument},getChildIndex:function(a){for(var b,c=a.parentNode,d=-1;c&&(b=c.childNodes[++d]);)if(b===a)return d;return-1},getNodePath:function(a){var b=a.parentNode,c=[],d=this.getChildIndex(a);return b&&(c=this.getNodePath(b))&&d>-1&&c.push(d),c},getNodeByPath:function(a,b){for(var c,d=a.documentElement,e=0;(c=b[++e])>-1;)d=d.childNodes[c];return d},getChildren:function(a){return a.children},createNode:function(a){return this.document.createElement(a)},createNodeWithText:function(a,b){var c=this.document.createElement(a);return c.innerHTML=b,c}},b.url={resolve:function(a,d){if(!b.utils.isString(a)||!b.utils.isString(d)||-1!==a.indexOf("://"))return b.utils.isString(a)?a:"";try{var e=new URL(a,d).toString();return"[object URL]"===e&&(e=c.resolve(d,a)),e}catch(f){return c.resolve(d,a)}}};var c=function(){function a(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];if(1<a.length){a[0]=a[0].slice(0,-1);for(var b=a.length-1,c=1;b>c;++c)a[c]=a[c].slice(1,-1);return a[b]=a[b].slice(1),a.join("")}return a[0]}function b(a){a=a.charCodeAt(0);var b;return b=16>a?"%0"+a.toString(16).toUpperCase():128>a?"%"+a.toString(16).toUpperCase():2048>a?"%"+(a>>6|192).toString(16).toUpperCase()+"%"+(63&a|128).toString(16).toUpperCase():"%"+(a>>12|224).toString(16).toUpperCase()+"%"+(a>>6&63|128).toString(16).toUpperCase()+"%"+(63&a|128).toString(16).toUpperCase()}function c(a){for(var b,c,d,e="",f=0,g=a.length;g>f;)b=parseInt(a.substr(f+1,2),16),128>b?(e+=String.fromCharCode(b),f+=3):b>=194&&224>b?(g-f>=6?(c=parseInt(a.substr(f+4,2),16),e+=String.fromCharCode((31&b)<<6|63&c)):e+=a.substr(f,6),f+=6):b>=224?(g-f>=9?(c=parseInt(a.substr(f+4,2),16),d=parseInt(a.substr(f+7,2),16),e+=String.fromCharCode((15&b)<<12|(63&c)<<6|63&d)):e+=a.substr(f,9),f+=9):(e+=a.substr(f,3),f+=3);return e}function d(a){return void 0===a?"undefined":null===a?"null":Object.prototype.toString.call(a).split(" ").pop().split("]").shift().toLowerCase()}function e(a){return a.toUpperCase()}function f(a,d){function f(a){var b=c(a);return b.match(d.m)?b:a}a.scheme&&(a.scheme=String(a.scheme).replace(d.a,f).toLowerCase().replace(d.j,"")),void 0!==a.userinfo&&(a.userinfo=String(a.userinfo).replace(d.a,f).replace(d.l,b).replace(d.a,e)),void 0!==a.host&&(a.host=String(a.host).replace(d.a,f).toLowerCase().replace(d.f,b).replace(d.a,e)),void 0!==a.path&&(a.path=String(a.path).replace(d.a,f).replace(a.scheme?d.g:d.h,b).replace(d.a,e)),void 0!==a.query&&(a.query=String(a.query).replace(d.a,f).replace(d.i,b).replace(d.a,e)),void 0!==a.fragment&&(a.fragment=String(a.fragment).replace(d.a,f).replace(d.c,b).replace(d.a,e))}function g(a,b){void 0===b&&(b={});var c,d=l,e={};return"suffix"===b.reference&&(a=(b.scheme?b.scheme+":":"")+"//"+a),(c=a.match(m))?(r?(e.scheme=c[1],e.userinfo=c[3],e.host=c[4],e.port=parseInt(c[5],10),e.path=c[6]||"",e.query=c[7],e.fragment=c[8],isNaN(e.port)&&(e.port=c[5])):(e.scheme=c[1]||void 0,e.userinfo=-1!==a.indexOf("@")?c[3]:void 0,e.host=-1!==a.indexOf("//")?c[4]:void 0,e.port=parseInt(c[5],10),e.path=c[6]||"",e.query=-1!==a.indexOf("?")?c[7]:void 0,e.fragment=-1!==a.indexOf("#")?c[8]:void 0,isNaN(e.port)&&(e.port=a.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?c[4]:void 0)),e.reference=void 0!==e.scheme||void 0!==e.userinfo||void 0!==e.host||void 0!==e.port||e.path||void 0!==e.query?void 0===e.scheme?"relative":void 0===e.fragment?"absolute":"uri":"same-document",b.reference&&"suffix"!==b.reference&&b.reference!==e.reference&&(e.error=e.error||"URI is not a "+b.reference+" reference."),c=s[(b.scheme||e.scheme||"").toLowerCase()],f(e,d),c&&c.parse&&c.parse(e,b)):e.error=e.error||"URI can not be parsed.",e}function h(a){var b=[];return void 0!==a.userinfo&&(b.push(a.userinfo),b.push("@")),void 0!==a.host&&b.push(a.host),"number"==typeof a.port&&(b.push(":"),b.push(a.port.toString(10))),b.length?b.join(""):void 0}function i(a){for(var b,c=[];a.length;)a.match(n)?a=a.replace(n,""):a.match(o)?a=a.replace(o,"/"):a.match(p)?(a=a.replace(p,"/"),c.pop()):"."===a||".."===a?a="":(b=a.match(q)[0],a=a.slice(b.length),c.push(b));return c.join("")}function j(a,b){void 0===b&&(b={});var c,d,e=l,g=[];return(c=s[(b.scheme||a.scheme||"").toLowerCase()])&&c.serialize&&c.serialize(a,b),f(a,e),"suffix"!==b.reference&&a.scheme&&(g.push(a.scheme),g.push(":")),e=h(a),void 0!==e&&("suffix"!==b.reference&&g.push("//"),g.push(e),a.path&&"/"!==a.path.charAt(0)&&g.push("/")),void 0!==a.path&&(d=a.path,b.absolutePath||c&&c.absolutePath||(d=i(d)),void 0===e&&(d=d.replace(/^\/\//,"/%2F")),g.push(d)),void 0!==a.query&&(g.push("?"),g.push(a.query)),void 0!==a.fragment&&(g.push("#"),g.push(a.fragment)),g.join("")}function k(a,b,c,d){void 0===c&&(c={});var e={};return d||(a=g(j(a,c),c),b=g(j(b,c),c)),c=c||{},!c.tolerant&&b.scheme?(e.scheme=b.scheme,e.userinfo=b.userinfo,e.host=b.host,e.port=b.port,e.path=i(b.path),e.query=b.query):(void 0!==b.userinfo||void 0!==b.host||void 0!==b.port?(e.userinfo=b.userinfo,e.host=b.host,e.port=b.port,e.path=i(b.path),e.query=b.query):(b.path?("/"===b.path.charAt(0)?e.path=i(b.path):(void 0===a.userinfo&&void 0===a.host&&void 0===a.port||a.path?a.path?e.path=a.path.slice(0,a.path.lastIndexOf("/")+1)+b.path:e.path=b.path:e.path="/"+b.path,e.path=i(e.path)),e.query=b.query):(e.path=a.path,e.query=void 0!==b.query?b.query:a.query),e.userinfo=a.userinfo,e.host=a.host,e.port=a.port),e.scheme=a.scheme),e.fragment=b.fragment,e}var l=function(b){var c=a("[0-9]","[A-Fa-f]"),d=a("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",b?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]");return{s:!1,j:new RegExp(a("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),l:new RegExp(a("[^\\%\\:]",d,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),f:new RegExp(a("[^\\%]",d,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),g:new RegExp(a("[^\\%\\/\\:\\@]",d,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),h:new RegExp(a("[^\\%\\/\\@]",d,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),i:new RegExp(a("[^\\%]",d,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]","[\\:\\@\\/\\?]",b?"[\\uE000-\\uF8FF]":"[]"),"g"),c:new RegExp(a("[^\\%]",d,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]","[\\:\\@\\/\\?]"),"g"),b:new RegExp(a("[^]",d,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),m:new RegExp(d,"g"),o:new RegExp(a("[^\\%]",d,a("[\\:\\/\\?\\#\\[\\]\\@]","[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]")),"g"),a:new RegExp("(?:"+("(?:"+("%[EFef]"+c+"%"+c+c+"%"+c+c)+")|"+("(?:"+("%[89A-Fa-f]"+c+"%"+c+c)+")")+"|"+("(?:"+("%"+c+c)+")"))+")","g")}}(!1),m=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?([^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n)*))?/i,n=/^\.\.?\//,o=/^\/\.(\/|$)/,p=/^\/\.\.(\/|$)/,q=/^\/?(?:.|\n)*?(?=\/|$)/,r=void 0==="".match(/(){0}/)[1],s={};return{IRI_SUPPORT:!1,VALIDATE_SUPPORT:!1,pctEncChar:b,pctDecChars:c,SCHEMES:s,parse:g,_recomposeAuthority:h,removeDotSegments:i,serialize:j,resolveComponents:k,resolve:function(a,b,c){return j(k(g(a,c),g(b,c),c,!0),c)},normalize:function(a,b){return"string"==typeof a?a=j(g(a,b),b):"object"===d(a)&&(a=g(j(a,b),b)),a},equal:function(a,b,c){return"string"==typeof a?a=j(g(a,c),c):"object"===d(a)&&(a=j(a,c)),"string"==typeof b?b=j(g(b,c),c):"object"===d(b)&&(b=j(b,c)),a===b},escapeComponent:function(a){return a&&a.toString().replace(l.b,b)},unescapeComponent:function(a){return a&&a.toString().replace(l.a,c)}}}();c.SCHEMES.http=c.SCHEMES.https={domainHost:!0,parse:function(a){
    return a.host||(a.error=a.error||"HTTP URIs must have a host."),a},serialize:function(a){return(a.port===("https"!==String(a.scheme).toLowerCase()?80:443)||""===a.port)&&(a.port=void 0),a.path||(a.path="/"),a}},b.ISODate=function(a,b){this.clear(),this.format=b?b:"auto",this.setFormatSep(),arguments[0]&&this.parse(a,b)},b.ISODate.prototype={clear:function(){this.clearDate(),this.clearTime(),this.clearTimeZone(),this.setAutoProfileState()},clearDate:function(){this.dY=-1,this.dM=-1,this.dD=-1,this.dDDD=-1},clearTime:function(){this.tH=-1,this.tM=-1,this.tS=-1,this.tD=-1},clearTimeZone:function(){this.tzH=-1,this.tzM=-1,this.tzPN="+",this.z=!1},setAutoProfileState:function(){this.autoProfile={sep:"T",dsep:"-",tsep:":",tzsep:":",tzZulu:"Z"}},parse:function(a,b){this.clear();var c=[],d=[],e=0,f="",g="",h="";return b&&(this.format=b),a.indexOf("t")>-1&&(this.autoProfile.sep="t"),a.indexOf("z")>-1&&(this.autoProfile.tzZulu="z"),a.indexOf("Z")>-1&&(this.autoProfile.tzZulu="Z"),-1===a.toUpperCase().indexOf("T")&&(this.autoProfile.sep=" "),a=a.toUpperCase().replace(" ","T"),a.indexOf("T")>-1?(c=a.split("T"),f=c[0],g=c[1],g.indexOf("Z")>-1&&(this.z=!0),(g.indexOf("+")>-1||g.indexOf("-")>-1)&&(d=g.split("Z"),g=d[0],h=d[1],(g.indexOf("+")>-1||g.indexOf("-")>-1)&&(e=0,e=g.indexOf("+")>-1?g.indexOf("+"):g.indexOf("-"),h=g.substring(e,g.length),g=g.substring(0,e)))):f=a,""!==f&&(this.parseDate(f),""!==g&&(this.parseTime(g),""!==h&&this.parseTimeZone(h))),this.toString(b)},parseDate:function(a,b){this.clearDate();var c=[];return-1===a.indexOf("-")&&(this.autoProfile.tsep=""),c=a.match(/(\d\d\d\d)-(\d\d\d)/),c&&(c[1]&&(this.dY=c[1]),c[2]&&(this.dDDD=c[2])),-1===this.dDDD&&(c=a.match(/(\d\d\d\d)?-?(\d\d)?-?(\d\d)?/),c[1]&&(this.dY=c[1]),c[2]&&(this.dM=c[2]),c[3]&&(this.dD=c[3])),this.toString(b)},parseTime:function(a,b){this.clearTime();var c=[];return-1===a.indexOf(":")&&(this.autoProfile.tsep=""),c=a.match(/(\d\d)?:?(\d\d)?:?(\d\d)?.?([0-9]+)?/),c[1]&&(this.tH=c[1]),c[2]&&(this.tM=c[2]),c[3]&&(this.tS=c[3]),c[4]&&(this.tD=c[4]),this.toTimeString(b)},parseTimeZone:function(a,b){this.clearTimeZone();var c=[];return"z"===a.toLowerCase()?(this.z=!0,this.autoProfile.tzZulu="z"===a?"z":"Z"):(-1===a.indexOf(":")&&(this.autoProfile.tzsep=""),c=a.match(/([\-\+]{1})?(\d\d)?:?(\d\d)?/),c[1]&&(this.tzPN=c[1]),c[2]&&(this.tzH=c[2]),c[3]&&(this.tzM=c[3])),this.tzZulu="z",this.toTimeString(b)},toString:function(a){var b="";return a&&(this.format=a),this.setFormatSep(),this.dY>-1?(b=this.dY,this.dM>0&&this.dM<13&&(b+=this.dsep+this.dM,this.dD>0&&this.dD<32&&(b+=this.dsep+this.dD,this.tH>-1&&this.tH<25&&(b+=this.sep+this.toTimeString(a)))),this.dDDD>-1&&(b+=this.dsep+this.dDDD)):this.tH>-1&&(b+=this.toTimeString(a)),b},toTimeString:function(a){var b="";return a&&(this.format=a),this.setFormatSep(),this.tH&&this.tH>-1&&this.tH<25&&(b+=this.tH,this.tM>-1&&this.tM<61&&(b+=this.tsep+this.tM,this.tS>-1&&this.tS<61&&(b+=this.tsep+this.tS,this.tD>-1&&(b+="."+this.tD))),this.z?b+=this.tzZulu:this.tzH&&this.tzH>-1&&this.tzH<25&&(b+=this.tzPN+this.tzH,this.tzM>-1&&this.tzM<61&&(b+=this.tzsep+this.tzM))),b},setFormatSep:function(){switch(this.format.toLowerCase()){case"rfc3339":this.sep="T",this.dsep="",this.tsep="",this.tzsep="",this.tzZulu="Z";break;case"w3c":this.sep="T",this.dsep="-",this.tsep=":",this.tzsep=":",this.tzZulu="Z";break;case"html5":this.sep=" ",this.dsep="-",this.tsep=":",this.tzsep=":",this.tzZulu="Z";break;default:this.sep=this.autoProfile.sep,this.dsep=this.autoProfile.dsep,this.tsep=this.autoProfile.tsep,this.tzsep=this.autoProfile.tzsep,this.tzZulu=this.autoProfile.tzZulu}},hasFullDate:function(){return-1!==this.dY&&-1!==this.dM&&-1!==this.dD},hasDate:function(){return-1!==this.dY},hasTime:function(){return-1!==this.tH},hasTimeZone:function(){return-1!==this.tzH}},b.ISODate.prototype.constructor=b.ISODate,b.dates={hasAM:function(a){return a=a.toLowerCase(),a.indexOf("am")>-1||a.indexOf("a.m.")>-1},hasPM:function(a){return a=a.toLowerCase(),a.indexOf("pm")>-1||a.indexOf("p.m.")>-1},removeAMPM:function(a){return a.replace("pm","").replace("p.m.","").replace("am","").replace("a.m.","")},isDuration:function(a){return b.utils.isString(a)&&(a=a.toLowerCase(),b.utils.startWith(a,"p"))?!0:!1},isTime:function(a){if(b.utils.isString(a)){if(a=a.toLowerCase(),a=b.utils.trim(a),a.match(":")&&(b.utils.startWith(a,"z")||b.utils.startWith(a,"-")||b.utils.startWith(a,"+")))return!0;if(a.match(/^[0-9]/)&&(this.hasAM(a)||this.hasPM(a)))return!0;if(a.match(":")&&!a.match(/t|\s/))return!0;if(b.utils.isNumber(a)&&(2===a.length||4===a.length||6===a.length))return!0}return!1},parseAmPmTime:function(a){var c=a,d=[];return b.utils.isString(c)&&(a=a.replace(/[ ]+/g,""),(a.match(":")||this.hasAM(a)||this.hasPM(a))&&(a.match(":")?d=a.split(":"):(d[0]=a,d[0]=this.removeAMPM(d[0])),this.hasPM(a)&&d[0]<12&&(d[0]=parseInt(d[0],10)+12),d[0]&&1===d[0].length&&(d[0]="0"+d[0]),d[0]&&(a=d.join(":")))),this.removeAMPM(a)},dateTimeUnion:function(a,c,d){var e=new b.ISODate(a,d),f=new b.ISODate;return f.parseTime(this.parseAmPmTime(c),d),e.hasFullDate()&&f.hasTime()?(e.tH=f.tH,e.tM=f.tM,e.tS=f.tS,e.tD=f.tD,e):e.hasFullDate()?e:new b.ISODate},concatFragments:function(a,c){var d=new b.ISODate,e=0,f="";if(a[0].toUpperCase().match("T"))return new b.ISODate(a[0],c);for(e=0;e<a.length;e++){if(f=a[e],"-"===f.charAt(4)&&d.hasFullDate()===!1&&d.parseDate(f),(f.indexOf(":")>-1||b.utils.isNumber(this.parseAmPmTime(f)))&&d.hasTime()===!1){var g=this.splitTimeAndZone(f);f=g[0],f=this.parseAmPmTime(f),d.parseTime(f),g.length>1&&d.parseTimeZone(g[1],c)}("-"===f.charAt(0)||"+"===f.charAt(0)||"Z"===f.toUpperCase())&&d.hasTimeZone()===!1&&d.parseTimeZone(f)}return d},splitTimeAndZone:function(a){for(var b=[a],c=["-","+","z","Z"],d=c.length;d--;)if(a.indexOf(c[d])>-1){b[0]=a.slice(0,a.indexOf(c[d])),b.push(a.slice(a.indexOf(c[d])));break}return b}},b.text={textFormat:"whitespacetrimmed",blockLevelTags:["h1","h2","h3","h4","h5","h6","p","hr","pre","table","address","article","aside","blockquote","caption","col","colgroup","dd","div","dt","dir","fieldset","figcaption","figure","footer","form","header","hgroup","hr","li","map","menu","nav","optgroup","option","section","tbody","testarea","tfoot","th","thead","tr","td","ul","ol","dl","details"],excludeTags:["noframe","noscript","template","script","style","frames","frameset"],parse:function(a,c,d){var e;return this.textFormat=d?d:this.textFormat,"normalised"===this.textFormat?(e=this.walkTreeForText(c),void 0!==e?this.normalise(a,e):""):this.formatText(a,b.domUtils.textContent(c),this.textFormat)},parseText:function(a,c,d){var e=b.domUtils.createNodeWithText("div",c);return this.parse(a,e,d)},formatText:function(a,c,d){if(this.textFormat=d?d:this.textFormat,c){var e="",f=/(<([^>]+)>)/gi;return e=c.replace(f,""),"whitespacetrimmed"===this.textFormat&&(e=b.utils.trimWhitespace(e)),b.domUtils.decodeEntities(a,e)}return""},normalise:function(a,c){return c=c.replace(/&nbsp;/g," "),c=b.utils.collapseWhiteSpace(c),c=b.domUtils.decodeEntities(a,c),c=c.replace("–","-"),b.utils.trim(c)},walkTreeForText:function(a){var c="",d=0;if(a.tagName&&this.excludeTags.indexOf(a.tagName.toLowerCase())>-1)return c;if(a.nodeType&&3===a.nodeType&&(c+=b.domUtils.getElementText(a)),a.childNodes&&a.childNodes.length>0)for(d=0;d<a.childNodes.length;d++){var e=this.walkTreeForText(a.childNodes[d]);void 0!==e&&(c+=e)}return a.tagName&&-1!==this.blockLevelTags.indexOf(a.tagName.toLowerCase())&&(c+=" "),""===c?void 0:c}},b.html={selfClosingElt:["area","base","br","col","hr","img","input","link","meta","param","command","keygen","source"],parse:function(a){var b="",c=0;if(a.childNodes&&a.childNodes.length>0)for(c=0;c<a.childNodes.length;c++){var d=this.walkTreeForHtml(a.childNodes[c]);void 0!==d&&(b+=d)}return b},walkTreeForHtml:function(a){var c="",d=0;if(a.nodeType&&3===a.nodeType&&(c+=b.domUtils.getElementText(a)),a.nodeType&&1===a.nodeType&&b.domUtils.hasAttribute(a,"data-include")===!1){c+="<"+a.tagName.toLowerCase();var e=b.domUtils.getOrderedAttributes(a);for(d=0;d<e.length;d++)c+=" "+e[d].name+'="'+e[d].value+'"';if(-1===this.selfClosingElt.indexOf(a.tagName.toLowerCase())&&(c+=">"),a.childNodes&&a.childNodes.length>0)for(d=0;d<a.childNodes.length;d++){var f=this.walkTreeForHtml(a.childNodes[d]);void 0!==f&&(c+=f)}c+=this.selfClosingElt.indexOf(a.tagName.toLowerCase())>-1?" />":"</"+a.tagName.toLowerCase()+">"}return""===c?void 0:c}},b.maps["h-adr"]={root:"adr",name:"h-adr",properties:{"post-office-box":{},"street-address":{},"extended-address":{},locality:{},region:{},"postal-code":{},"country-name":{}}},b.maps["h-card"]={root:"vcard",name:"h-card",properties:{fn:{map:"p-name"},adr:{map:"p-adr",uf:["h-adr"]},agent:{uf:["h-card"]},bday:{map:"dt-bday"},"class":{},category:{map:"p-category",relAlt:["tag"]},email:{map:"u-email"},geo:{map:"p-geo",uf:["h-geo"]},key:{map:"u-key"},label:{},logo:{map:"u-logo"},mailer:{},"honorific-prefix":{},"given-name":{},"additional-name":{},"family-name":{},"honorific-suffix":{},nickname:{},note:{},org:{},"p-organization-name":{},"p-organization-unit":{},photo:{map:"u-photo"},rev:{map:"dt-rev"},role:{},sequence:{},"sort-string":{},sound:{map:"u-sound"},title:{map:"p-job-title"},tel:{},tz:{},uid:{map:"u-uid"},url:{map:"u-url"}}},b.maps["h-entry"]={root:"hentry",name:"h-entry",properties:{"entry-title":{map:"p-name"},"entry-summary":{map:"p-summary"},"entry-content":{map:"e-content"},published:{map:"dt-published"},updated:{map:"dt-updated"},author:{uf:["h-card"]},category:{map:"p-category",relAlt:["tag"]},geo:{map:"p-geo",uf:["h-geo"]},latitude:{},longitude:{},url:{map:"u-url",relAlt:["bookmark"]}}},b.maps["h-event"]={root:"vevent",name:"h-event",properties:{summary:{map:"p-name"},dtstart:{map:"dt-start"},dtend:{map:"dt-end"},description:{},url:{map:"u-url"},category:{map:"p-category",relAlt:["tag"]},location:{uf:["h-card"]},geo:{uf:["h-geo"]},latitude:{},longitude:{},duration:{map:"dt-duration"},contact:{uf:["h-card"]},organizer:{uf:["h-card"]},attendee:{uf:["h-card"]},uid:{map:"u-uid"},attach:{map:"u-attach"},status:{},rdate:{},rrule:{}}},b.maps["h-feed"]={root:"hfeed",name:"h-feed",properties:{category:{map:"p-category",relAlt:["tag"]},summary:{map:"p-summary"},author:{uf:["h-card"]},url:{map:"u-url"},photo:{map:"u-photo"}}},b.maps["h-geo"]={root:"geo",name:"h-geo",properties:{latitude:{},longitude:{}}},b.maps["h-item"]={root:"item",name:"h-item",subTree:!1,properties:{fn:{map:"p-name"},url:{map:"u-url"},photo:{map:"u-photo"}}},b.maps["h-listing"]={root:"hlisting",name:"h-listing",properties:{version:{},lister:{uf:["h-card"]},dtlisted:{map:"dt-listed"},dtexpired:{map:"dt-expired"},location:{},price:{},item:{uf:["h-card","a-adr","h-geo"]},summary:{map:"p-name"},description:{map:"e-description"},listing:{}}},b.maps["h-news"]={root:"hnews",name:"h-news",properties:{entry:{uf:["h-entry"]},geo:{uf:["h-geo"]},latitude:{},longitude:{},"source-org":{uf:["h-card"]},dateline:{uf:["h-card"]},"item-license":{map:"u-item-license"},principles:{map:"u-principles",relAlt:["principles"]}}},b.maps["h-org"]={root:"h-x-org",name:"h-org",childStructure:!0,properties:{"organization-name":{},"organization-unit":{}}},b.maps["h-product"]={root:"hproduct",name:"h-product",properties:{brand:{uf:["h-card"]},category:{map:"p-category",relAlt:["tag"]},price:{},description:{map:"e-description"},fn:{map:"p-name"},photo:{map:"u-photo"},url:{map:"u-url"},review:{uf:["h-review","h-review-aggregate"]},listing:{uf:["h-listing"]},identifier:{map:"u-identifier"}}},b.maps["h-recipe"]={root:"hrecipe",name:"h-recipe",properties:{fn:{map:"p-name"},ingredient:{map:"e-ingredient"},"yield":{},instructions:{map:"e-instructions"},duration:{map:"dt-duration"},photo:{map:"u-photo"},summary:{},author:{uf:["h-card"]},published:{map:"dt-published"},nutrition:{},category:{map:"p-category",relAlt:["tag"]}}},b.maps["h-resume"]={root:"hresume",name:"h-resume",properties:{summary:{},contact:{uf:["h-card"]},education:{uf:["h-card","h-event"]},experience:{uf:["h-card","h-event"]},skill:{},affiliation:{uf:["h-card"]}}},b.maps["h-review-aggregate"]={root:"hreview-aggregate",name:"h-review-aggregate",properties:{summary:{map:"p-name"},item:{map:"p-item",uf:["h-item","h-geo","h-adr","h-card","h-event","h-product"]},rating:{},average:{},best:{},worst:{},count:{},votes:{},category:{map:"p-category",relAlt:["tag"]},url:{map:"u-url",relAlt:["self","bookmark"]}}},b.maps["h-review"]={root:"hreview",name:"h-review",properties:{summary:{map:"p-name"},description:{map:"e-description"},item:{map:"p-item",uf:["h-item","h-geo","h-adr","h-card","h-event","h-product"]},reviewer:{uf:["h-card"]},dtreviewer:{map:"dt-reviewer"},rating:{},best:{},worst:{},category:{map:"p-category",relAlt:["tag"]},url:{map:"u-url",relAlt:["self","bookmark"]}}},b.rels={friend:["yes","external"],acquaintance:["yes","external"],contact:["yes","external"],met:["yes","external"],"co-worker":["yes","external"],colleague:["yes","external"],"co-resident":["yes","external"],neighbor:["yes","external"],child:["yes","external"],parent:["yes","external"],sibling:["yes","external"],spouse:["yes","external"],kin:["yes","external"],muse:["yes","external"],crush:["yes","external"],date:["yes","external"],sweetheart:["yes","external"],me:["yes","external"],license:["yes","yes"],nofollow:["no","external"],tag:["no","yes"],self:["no","external"],bookmark:["no","external"],author:["no","external"],home:["no","external"],directory:["no","external"],enclosure:["no","external"],pronunciation:["no","external"],payment:["no","external"],principles:["no","external"]};var d={version:b.version,livingStandard:b.livingStandard};return d.get=function(c){var d=new b.Parser;return a(d,c),d.get(c)},d.getParent=function(c,d){var e=new b.Parser;return a(e,d),e.getParent(c,d)},d.count=function(c){var d=new b.Parser;return a(d,c),d.count(c)},d.isMicroformat=function(c,d){var e=new b.Parser;return a(e,d),e.isMicroformat(c,d)},d.hasMicroformats=function(c,d){var e=new b.Parser;return a(e,d),e.hasMicroformats(c,d)},d}),function(a){var b,c,d,e,f;if(a){try{d=!!(new a).parseFromString("","text/html")}catch(g){d=!1}if(!d){try{var h=document.implementation.createHTMLDocument("");h.documentElement.innerHTML="<title></title><div></div>",f=!0}catch(g){f=!1}if(!f)try{e=!!(new a).parseFromString("","text/xml")}catch(g){d=!1}a.prototype&&(f||e)&&(b=a.prototype,c=b.parseFromString,b.parseFromString=function(b,d){if(/^\s*text\/html\s*(?:;|$)/i.test(d)){var g,h,i;return f?(g=document.implementation.createHTMLDocument(""),h=g.documentElement,h.innerHTML=b,i=h.firstElementChild):e&&(/^<html.*html>$/i.test(b)||(b="<html>"+b+"</html>"),g=(new a).parseFromString(b,"text/xml"),h=g.documentElement,i=h.firstElementChild),1===h.childElementCount&&"html"===i.localName.toLowerCase()&&g.replaceChild(i,h),g}return c.apply(this,arguments)})}}}(DOMParser);
//# sourceMappingURL=microformatshiv.min.js.map
