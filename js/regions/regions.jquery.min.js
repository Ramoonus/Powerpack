/*global jQuery, window, document *//*!	
* Regions.js v0.1
*
* Copyright 2011, Robin Ricard
* Released under the MIT license
*/(function(a,b,c,d){var e={resizing:!0,lazyTime:150},f=function(c,d,e){g(c,d,e);var f=!1;a(b).resize(function(){f||(f=!0,setTimeout(function(){g(c,d,e),f=!1},e.lazyTime))})},g=function(a,b,c){b=b.slice(0),a.css("display","none");var d=h(a,b[0]);b.shift();return b.length>0?g(d,b):d},h=function(a,b){a=a.clone(),b.css("position")==="static"&&b.css("position","relative"),b.empty(),b.append(a.children()),b.children().first().css("margin-top","0");var c=i(b);b.children().last().css("margin-bottom","0");return c},i=function(b,c,e){c===d&&(c=b);var f=a("<div></div>"),g=b.children(),h=!1;g.each(function(b,d){d=a(d),h?(d.detach(),f.append(a("<span> </span>")),f.append(d)):d.position().top+d.outerHeight(!0)>=c.height()&&(d.detach(),h=d)});if(h){e||(h.contents().filter(function(){return this.nodeType===3}).wrap("<span></span").parent().lettering("words"),e=!0);if(h.children().length){b.append(h);var j=i(h,c,e),k=h.clone();k.empty(),k.append(j.children()),f.prepend(k)}else f.prepend(h)}return f};a.fn.regions=function(b,c){c=a.extend(e,c),b=a.map(b,function(b){return typeof b=="string"?a(b):b}),c.resizing?f(a(this),b,c):g(a(this),b,c)}})(jQuery,window,document)